<p-toast></p-toast>
<p-confirmDialog header="Confirmation" icon="pi pi-exclamation-triangle"></p-confirmDialog>
<div class="surface-ground border-top-1 border-bottom-1 border-gray-300 px-4 py-3">
  <div class="flex flex-column md:align-items-center md:justify-content-between md:flex-row">
    <div class="font-medium text-xl text-900">Add Users </div>
    <div class="mt-3 md:mt-0">
    </div>
  </div>
</div>


<div  class="shadow-2 p-3 flex flex-column surface-card" style="margin:2%">
    <div class="mb-5 grid">
      <div class="col-12 md:col-6 grid">
        <label class="col-12 md:col-3 text-900 font-medium text-xl" style="text-align: center; margin-top: 5px;">Employee ID :</label>
        <div class="col-12 md:col-6">
          <input pInputText="text" pInputText [(ngModel)]="emp_id" placeholder="Enter Employee ID" style="width: 100%;" />
        </div>
        <div class="col-12 md:col-3">
          <p-button label="Add More" (click)="getEmployee(emp_id)" icon="pi pi-plus"></p-button>
        </div>
      </div>
      <div class="flex inline-flex col-12 md:col-6 align-content-center pt-0 mt-0">
        <label class=" col-12 md:col-4 text-900 font-medium text-xl" style="text-align: right; margin-top: 5px;">Select A File :</label>
        <div class="col-12 md:col-4" style="text-align: left;">
        <p-fileUpload *ngIf="!uploadedFile" mode="basic" [name]="file" #uploader chooseLabel="Browse" [multiple]="false" accept=".xlsx"
         [maxFileSize]="1000" (onSelect)="onSelect($event.files)" chooseIcon="pi pi-file-excel">
        </p-fileUpload>
        <p-button *ngIf="uploadedFile" [label]="uploadedFile.name" icon="pi pi-times-circle" (onClick)="uploadedFile=null" pTooltip="Click To Select a New File" tooltipPosition="bottom"></p-button>
       </div>
       <div class="col-12 md:col-4 " style="text-align: left;">
         <p-button label="Sample" icon="pi pi-download" pTooltip="Click To download a sample file" tooltipPosition="bottom" (onClick)="download()"></p-button>
      </div>
      </div>
    </div>

    <div class="card">
      <p-table #dt1  [value]="UserList" [rowHover]="true" [responsive]="true"
        styleClass="p-datatable-gridlines p-datatable-striped" >
        <ng-template pTemplate="header">
          <tr>
            <th style="text-align: center; width:5%">Sr. No</th>
            <th style="text-align: center; width:10%">Employee ID</th>
            <th style="text-align: center; width:20%">Employee Name</th>

            <th style="text-align: center; width:20%">Employee IOU</th>
            <th  style="text-align: center; width:7%">Action</th>
          </tr>
        </ng-template>

        <ng-template pTemplate="body" let-columns let-i="rowIndex">
          <tr>
            <td style="text-align: center;">{{i+1}}</td>
            <td style="text-align: center;">{{columns.employee_number}}</td>
            <td style="text-align: center;">{{columns.full_name}}</td>

            <td style="text-align: center;">{{columns.iou_name}}</td>
            <td style="text-align: center;"><button pButton class="p-button-warning p-button-raised p-button-rounded" type="button"
              icon="pi pi-trash" (click)="removeUser(i)"  pTooltip="Delete" tooltipPosition="top" ></button></td>
          </tr>
        </ng-template>

      </p-table>
      <div *ngIf="data.length==0" class="user" ><b>No User Added</b></div>
    </div>
    <div  style="text-align: center; padding-top: 20px;"><p-button label="Submit" (click)="submitUser()"></p-button>
    </div>
</div>

<div style="margin:2%">

  <p-panel class="font-large text-3xl text-900" header="User List" [toggleable]="true" [collapsed]="true">

    <ng-template pTemplate="icons">

    </ng-template>

    <div class="card">

      <p-table #dt2 [paginator]="true" [rows]="10" [value]="data1.Data" [rowHover]="true" [responsive]="true"

        styleClass="p-datatable-gridlines p-datatable-striped" [globalFilterFields]="['emp_id','emp_fullname']">

        <ng-template pTemplate="caption">

          <div class="mt-3 md:mt-0" style="text-align:right">

            <span class="p-input-icon-left p-ml-auto">

              <i class="pi pi-search"></i>

              <input pInputText type="text" (input)="dt2.filterGlobal($any($event.target).value, 'contains')"

                placeholder="Search" />

            </span>

          </div>

        </ng-template>
        <ng-template pTemplate="header">

          <tr>

            <th pSortableColumn="Sr.no" style="text-align: center; width:10%">Sr. No

            </th>

            <th pSortableColumn="empid" style="text-align: center; width:30%">Employee ID

            </th>

            <th pSortableColumn="employee_name" style="text-align: center; width:60%">Employee Name

            </th>

          </tr>

        </ng-template>

        <ng-template pTemplate="body" let-columns let-i="rowIndex">

          <tr>

            <td style="text-align: center;">{{i+1}}</td>

            <td style="text-align: center;">{{columns.emp_id}}</td>

            <td style="text-align: center;">{{columns.emp_fullname}}</td>

          </tr>

        </ng-template>




      </p-table>

    </div>

  </p-panel>

</div>
