<div class="surface-ground border-top-1 border-bottom-1 border-gray-300 px-4 py-3">
    <div class="flex flex-column md:align-items-center md:justify-content-between md:flex-row">
        <div class="font-medium text-3xl text-900">BB{{projectid}} - {{projectName}} (View Vulnerabilities)</div>
        <div class="mt-3 md:mt-0">
            <button pTooltip="Back" [routerLink]="['/project/'+ projectid]"
                    tooltipPosition="top" label="Back" pButton pRipple style="margin-left: 4px;" type="button"
                    icon="pi pi-arrow-circle-left" class="p-button-primary"></button>
            
        </div>
    </div>
</div>

<div class="p-5" *ngIf="NotAccessible == false">
    <p-table #dt1 [value]="AllVuln" dataKey="id" [rows]="10" [showCurrentPageReport]="true"
        [rowsPerPageOptions]="[10,25,50]" styleClass="p-datatable-gridlines" [paginator]="true"
        currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
        [globalFilterFields]="['title','affectedcia']">
        <ng-template pTemplate="caption">
        <div class="p-d-flex">
            <span class="p-input-icon-left p-ml-auto">
                <i class="pi pi-search"></i>
                <input pInputText type="text" (input)="dt1.filterGlobal($any($event.target).value, 'contains')" placeholder="Search keyword" />
            </span>
        </div>
    </ng-template>
        <ng-template pTemplate="header">
            <tr>
                <th>Title</th>
                <th>Vulnerability Category</th>
                <th>Reported By</th>
                <th>Identification Date</th>
                <th>Status</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-vulnerability>
            <tr>
                <td class="text-blue-600" [routerLink]="['/ViewVulnerability/' + vulnerability.id]" style="text-decoration: underline; cursor: pointer;">{{vulnerability.title}}</td>
                <td>{{vulnerability.vrt_category}}</td>
                <td>{{vulnerability.avatar}}</td>
                <td>{{vulnerability.identificationdt | date:'medium'}}</td>
                <td>{{vulnerability.status}}</td>
            </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage">
            <tr>
                <td colspan="7">No Vulnerabilities Reported .</td>
            </tr>
        </ng-template>
    </p-table>
</div>
<div *ngIf="NotAccessible == true" style="text-align: center;">
    <h1>You are not authorised to see this page</h1>
</div>